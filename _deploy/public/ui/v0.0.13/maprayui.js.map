{"version":3,"file":"maprayui.js","sources":["../../../../node_modules/core-js/internals/global.js","../../../../node_modules/core-js/internals/fails.js","../../../../node_modules/core-js/internals/descriptors.js","../../../../node_modules/core-js/internals/object-property-is-enumerable.js","../../../../node_modules/core-js/internals/create-property-descriptor.js","../../../../node_modules/core-js/internals/classof-raw.js","../../../../node_modules/core-js/internals/indexed-object.js","../../../../node_modules/core-js/internals/require-object-coercible.js","../../../../node_modules/core-js/internals/to-indexed-object.js","../../../../node_modules/core-js/internals/is-object.js","../../../../node_modules/core-js/internals/to-primitive.js","../../../../node_modules/core-js/internals/has.js","../../../../node_modules/core-js/internals/document-create-element.js","../../../../node_modules/core-js/internals/ie8-dom-define.js","../../../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../../../node_modules/core-js/internals/an-object.js","../../../../node_modules/core-js/internals/object-define-property.js","../../../../node_modules/core-js/internals/create-non-enumerable-property.js","../../../../node_modules/core-js/internals/set-global.js","../../../../node_modules/core-js/internals/shared-store.js","../../../../node_modules/core-js/internals/inspect-source.js","../../../../node_modules/core-js/internals/native-weak-map.js","../../../../node_modules/core-js/internals/shared.js","../../../../node_modules/core-js/internals/uid.js","../../../../node_modules/core-js/internals/shared-key.js","../../../../node_modules/core-js/internals/hidden-keys.js","../../../../node_modules/core-js/internals/internal-state.js","../../../../node_modules/core-js/internals/redefine.js","../../../../node_modules/core-js/internals/path.js","../../../../node_modules/core-js/internals/get-built-in.js","../../../../node_modules/core-js/internals/to-integer.js","../../../../node_modules/core-js/internals/to-length.js","../../../../node_modules/core-js/internals/to-absolute-index.js","../../../../node_modules/core-js/internals/array-includes.js","../../../../node_modules/core-js/internals/object-keys-internal.js","../../../../node_modules/core-js/internals/enum-bug-keys.js","../../../../node_modules/core-js/internals/object-get-own-property-names.js","../../../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../../../node_modules/core-js/internals/own-keys.js","../../../../node_modules/core-js/internals/copy-constructor-properties.js","../../../../node_modules/core-js/internals/is-forced.js","../../../../node_modules/core-js/internals/export.js","../../../../node_modules/core-js/internals/math-sign.js","../../../../node_modules/core-js/modules/es.math.sign.js","../../src/StandardUIViewer.js","../../src/index.js"],"sourcesContent":["var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.6.4',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","// `Math.sign` method implementation\n// https://tc39.github.io/ecma262/#sec-math.sign\nmodule.exports = Math.sign || function sign(x) {\n  // eslint-disable-next-line no-self-compare\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};\n","var $ = require('../internals/export');\nvar sign = require('../internals/math-sign');\n\n// `Math.sign` method\n// https://tc39.github.io/ecma262/#sec-math.sign\n$({ target: 'Math', stat: true }, {\n  sign: sign\n});\n","import mapray from '@mapray/mapray-js';\n\nvar GeoMath = mapray.GeoMath;\nvar GeoPoint = mapray.GeoPoint;\n\n/**\n * @summary 標準Maprayビューワ\n *\n * @class StandardUIViewer\n * @extends {mapray.RenderCallback}\n */\nclass StandardUIViewer extends mapray.RenderCallback\n{\n    /**\n     * @summary コンストラクタ\n     * @param {string|Element}              container                               ビューワ作成先のコンテナ（IDまたは要素）\n     * @param {string}                      access_token                            アクセストークン\n     * @param {object}                      options                                 生成オプション\n     * @param {mapray.DemProvider}          options.dem_provider                    DEMプロバイダ\n     * @param {mapray.ImageProvider}        options.image_provider                  画像プロバイダ\n     * @param {array}                       options.layers                          地図レイヤー配列\n     * @param {mapray.Viewer.RenderMode}    options.render_mode                     レンダリングモード\n     * @param {mapray.DebugStats}           options.debug_stats                     デバッグ統計オブジェクト\n     * @param {mapray.Attributionontroller} options.attribution_controller          著作権表示の表示制御\n     * @param {object}                      options.camera_position                 カメラ位置\n     * @param {number}                      options.camera_position.latitude        緯度（度）\n     * @param {number}                      options.camera_position.longitude       経度（度）\n     * @param {number}                      options.camera_position.height          高さ（m）\n     * @param {object}                      options.lookat_position                 注視点位置\n     * @param {number}                      options.lookat_position.latitude        緯度（度）\n     * @param {number}                      options.lookat_position.longitude       経度（度）\n     * @param {number}                      options.lookat_position.height          高さ（m）\n     * @param {object}                      options.camera_parameter                カメラパラメータ\n     * @param {number}                      options.camera_parameter.fov            画角（度）\n     * @param {number}                      options.camera_parameter.near           近接平面距離（m）\n     * @param {number}                      options.camera_parameter.far            遠方平面距離（m）\n     * @param {number}                      options.camera_parameter.speed_factor   移動速度係数\n     * @memberof StandardUIViewer\n     */\n    constructor( container, access_token, options )\n    {\n        super();\n\n        this.createViewer( container, access_token, options );\n\n        // カメラパラメータ\n        this._camera_parameter = {\n            latitude: 0,         // 緯度\n            longitude: 0,        // 経度\n            height: 0,           // 高度\n            pitch: 0,            // 上下（X軸）回転\n            yaw: 0,              // 左右（Z軸）回転\n            fov: 0,              // 画角\n            near: 0,             // 近接平面距離\n            far: 0,              // 遠方平面距離\n        };\n\n        // カメラパラメータの初期化\n        this._initCameraParameter( options );\n\n        this._operation_mode = StandardUIViewer.OperationMode.NONE;         // 操作モード\n\n        this._mouse_down_position = GeoMath.createVector2f();               // マウスダウンした位置\n        this._pre_mouse_position = GeoMath.createVector2f();                // 直前のマウス位置\n        this._rotate_center = GeoMath.createVector3();                      // 回転中心\n\n        this._translate_drag = GeoMath.createVector2f();                    // 平行移動の移動量（マウスの移動量）\n        this._rotate_drag = GeoMath.createVector2f();                       // 回転の移動量（マウスの移動量）\n        this._free_rotate_drag = GeoMath.createVector2f();                  // 自由回転の移動量（マウスの移動量）\n        this._height_drag = GeoMath.createVector2f();                       // 高度変更の移動量（マウスの移動量）\n\n        this._zoom_wheel = 0;                                               // 視線方向への移動量（ホイールの移動量）\n        this._fovy_key = 0;                                                 // 画角変更の指定回数\n\n        this._default_fov = StandardUIViewer.DEFAULT_CAMERA_PARAMETER.fov   // リセット用の画角\n\n        this._key_mode = false;                                             // キー操作中\n    }\n\n    /**\n     * @summary ビューワの作成\n     * @param {string|Element}              container                               ビューワ作成先のコンテナ（IDまたは要素）\n     * @param {string}                      access_token                            アクセストークン\n     * @param {object}                      options                                 生成オプション\n     * @param {mapray.DemProvider}          options.dem_provider                    DEMプロバイダ\n     * @param {mapray.ImageProvider}        options.image_provider                  画像プロバイダ\n     * @param {array}                       options.layers                          地図レイヤー配列\n     * @param {mapray.Viewer.RenderMode}    options.render_mode                     レンダリングモード\n     * @param {mapray.DebugStats}           options.debug_stats                     デバッグ統計オブジェクト\n     * @param {mapray.Attributionontroller} options.attribution_controller          著作権表示の表示制御\n     */\n    createViewer( container, access_token, options ) {\n        if ( this._viewer )\n        {\n            this.destroy();\n        }\n\n        this._viewer = new mapray.Viewer(\n            container, {\n            dem_provider: this._createDemProvider( access_token, options ),\n            image_provider: this._createImageProvider( options ),\n            layers: ( options && options.layers ) || null,\n            render_callback: this,\n            render_mode: ( options && options.render_mode ) || mapray.Viewer.RenderMode.SURFACE,\n            debug_stats: ( options && options.debug_stats ) || null,\n            attribution_controller: ( options && options.attribution_controller ) || null\n        }\n        );\n\n        // 右クリックメニューの無効化\n        var element = this._viewer._canvas_element;\n        element.setAttribute( \"oncontextmenu\", \"return false;\" );\n\n        // イベントリスナーの追加\n        this._addEventListener();\n        \n        return this._viewer;\n    }\n\n    /**\n     * @summary 破棄関数\n     * \n     * @memberof StandardUIViewer\n     */\n    destroy()\n    {\n        if ( !this._viewer )\n        {\n            return;\n        }\n\n        this._removeEventListener()\n\n        this._viewer.destroy();\n        this._viewer = null;\n    }    \n\n    /**\n     * @summary ビューワ\n     * @type {mapray.viewer}\n     * @readonly\n     * @memberof StandardUIViewer\n     */\n    get viewer() \n    {\n        return this._viewer;\n    }\n\n    /**\n     * @summary DEMプロバイダの生成\n     *\n     * @param {string}                      access_token            アクセストークン\n     * @param {object}                      options                 生成オプション\n     * @param {mapray.DemProvider}          options.dem_provider    DEMプロバイダ\n     * @returns {mapray.DemProvider}                                DEMプロバイダ\n     * @memberof StandardUIViewer\n     */\n    _createDemProvider( access_token, options )\n    {\n        return ( options && options.dem_provider ) || new mapray.CloudDemProvider( access_token );\n    }\n\n    /**\n     * @summary 画像プロバイダの生成\n     *\n     * @param {object}                      options                 生成オプション\n     * @param {mapray.ImageProvider}        options.image_provider  画像プロバイダ\n     * @returns {mapray.ImageProvider}                              画像プロバイダ \n     * @memberof StandardUIViewer\n     */\n    _createImageProvider( options )\n    {\n        return ( options && options.image_provider ) || new mapray.StandardImageProvider( \"https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/\", \".jpg\", 256, 2, 18 )\n    }\n\n    /**\n     * @summary カメラパラメータの初期化\n     *\n     * @param {object}                      options.camera_position                 カメラ位置\n     * @param {number}                      options.camera_position.latitude        緯度（度）\n     * @param {number}                      options.camera_position.longitude       経度（度）\n     * @param {number}                      options.camera_position.height          高さ（m）\n     * @param {object}                      options.lookat_position                 注視点位置\n     * @param {number}                      options.lookat_position.latitude        緯度（度）\n     * @param {number}                      options.lookat_position.longitude       経度（度）\n     * @param {number}                      options.lookat_position.height          高さ（m）\n     * @param {object}                      options.camera_parameter                カメラパラメータ\n     * @param {number}                      options.camera_parameter.fov            画角（度）\n     * @param {number}                      options.camera_parameter.near           近接平面距離（m）\n     * @param {number}                      options.camera_parameter.far            遠方平面距離（m）\n     * @param {number}                      options.camera_parameter.speed_factor   移動速度係数\n     * @memberof StandardUIViewer\n     */\n    _initCameraParameter( options )\n    {\n        var camera_position = ( options && options.camera_position ) || StandardUIViewer.DEFAULT_CAMERA_POSITION;\n        var lookat_position = ( options && options.lookat_position ) || StandardUIViewer.DEFAULT_LOOKAT_POSITION;\n        var camera_parameter = ( options && options.camera_parameter ) || StandardUIViewer.DEFAULT_CAMERA_PARAMETER;\n\n        // カメラ位置の設定\n        this.setCameraPosition( camera_position );\n\n        //　注視点位置の設定\n        this.setLookAtPosition( lookat_position );\n\n        // カメラパラメータの設定\n        this.setCameraParameter( camera_parameter );\n\n        // カメラ姿勢の確定\n        this._updateViewerCamera();\n    }\n\n    /**\n     * @summary イベントリスナーの追加\n     *\n     * @memberof StandardUIViewer\n     */\n    _addEventListener()\n    {\n        var canvas = this._viewer._canvas_element;\n        var self = this;\n\n        window.addEventListener( \"blur\", function ( event ) { self._onBlur( event ); }, { passive: false } );\n        canvas.addEventListener( \"mousedown\", function ( event ) { self._onMouseDown( event ); }, { passive: false } );\n        document.addEventListener( \"mousemove\", function ( event ) { self._onMouseMove( event ); }, { passive: false } );\n        document.addEventListener( \"mouseup\", function ( event ) { self._onMouseUp( event ); }, { passive: false } );\n        document.addEventListener( \"wheel\", function ( event ) { self._onMouseWheel( event ); }, { passive : false } );\n        document.addEventListener( \"keydown\", function ( event ) { self._onKeyDown( event ); }, { passive: false } );\n        document.addEventListener( \"keyup\", function ( event ) { self._onKeyUp( event ); }, { passive: false } );\n    }\n\n    /**\n     * @summary イベントリスナーの削除\n     *\n     * @memberof StandardUIViewer\n     */\n    _removeEventListener()\n    {\n        var canvas = this._viewer._canvas_element;\n        var self = this;\n\n        window.removeEventListener( \"blur\", function ( event ) { self._onBlur( event ); }, { passive: false } );\n        canvas.removeEventListener( \"mousedown\", function ( event ) { self._onMouseDown( event ); }, { passive: false } );\n        document.removeEventListener( \"mousemove\", function ( event ) { self._onMouseMove( event ); }, { passive: false } );\n        document.removeEventListener( \"mouseup\", function ( event ) { self._onMouseUp( event ); }, { passive: false } );\n        document.removeEventListener( \"wheel\", function ( event ) { self._onMouseWheel( event ); }, { passive: false } );\n        document.removeEventListener( \"keydown\", function ( event ) { self._onKeyDown( event ); }, { passive: false } );\n        document.removeEventListener( \"keyup\", function ( event ) { self._onKeyUp( event ); }, { passive: false } );\n    }\n\n\n    /**\n     * @summary レンダリングループ開始の処理\n     *\n     * @memberof StandardUIViewer\n     */\n    onStart()\n    {\n\n    }\n\n    /**\n     * @summary レンダリングループ終了の処理\n     *\n     * @memberof StandardUIViewer\n     */\n    onStop()\n    {\n\n    }\n\n    /**\n     * @summary フレームレンダリング前の処理\n     *\n     * @param {number} delta_time  全フレームからの経過時間（秒）\n     * @memberof StandardUIViewer\n     */\n    onUpdateFrame( delta_time )\n    {\n        // 平行移動\n        this._translation( delta_time );\n\n        // 回転\n        this._rotation();\n\n        // 自由回転\n        this._freeRotation( delta_time )\n\n        // 高さ変更\n        this._translationOfHeight();\n\n        //　視線方向移動\n        this._translationOfEyeDirection();\n\n        // 画角変更\n        this._changeFovy();\n\n        // 高度補正\n        this._correctAltitude();\n\n        // クリップ範囲の更新\n        this._updateClipPlane();\n\n        // カメラ姿勢の確定\n        this._updateViewerCamera();\n    }\n\n    /**\n     * @summary カメラの位置・向きの更新\n     *\n     * @memberof StandardUIViewer\n     */\n    _updateViewerCamera()\n    {\n        var camera = this._viewer.camera;\n\n        var camera_geoPoint = new GeoPoint( this._camera_parameter.longitude, this._camera_parameter. latitude, this._camera_parameter.height );\n        var camera_matrix = camera_geoPoint.getMlocsToGocsMatrix( GeoMath.createMatrix() );\n\n        var pitch_matrix = GeoMath.rotation_matrix( [1, 0, 0], this._camera_parameter.pitch, GeoMath.createMatrix() );\n        var yaw_matrix = GeoMath.rotation_matrix( [0, 0, 1], this._camera_parameter.yaw, GeoMath.createMatrix() );\n        var eye_matrix = GeoMath.mul_AA( yaw_matrix, pitch_matrix, GeoMath.createMatrix() );\n\n        camera.view_to_gocs = GeoMath.mul_AA( camera_matrix, eye_matrix, GeoMath.createMatrix() );\n\n        camera.fov = this._camera_parameter.fov;\n\n        camera.near = this._camera_parameter.near;\n        camera.far = this._camera_parameter.far;\n    }\n\n    /**\n     * @summary クリップ範囲の更新\n     * \n     * @memberof StandardUIViewer\n     */\n    _updateClipPlane()\n    {\n        // 地表面の標高\n        var elevation = this._viewer.getElevation( this._camera_parameter.latitude, this._camera_parameter.longitude );\n        var altitude = Math.max( this._camera_parameter.height - elevation, StandardUIViewer.MINIMUM_HEIGHT );\n\n        this._camera_parameter.near = Math.max( altitude * StandardUIViewer.NEAR_FACTOR, StandardUIViewer.MINIMUM_NEAR );\n        this._camera_parameter.far = Math.max( this._camera_parameter.near * StandardUIViewer.FAR_FACTOR, StandardUIViewer.MINIMUM_FAR );\n    }\n\n    /**\n     * @summary 高度の補正（地表面以下にならないようにする）\n     *\n     * @memberof StandardUIViewer\n     */\n    _correctAltitude()\n    {\n        var elevation = this._viewer.getElevation( this._camera_parameter.latitude, this._camera_parameter.longitude );\n        this._camera_parameter.height = Math.max( this._camera_parameter.height, elevation + StandardUIViewer.MINIMUM_HEIGHT );\n    }\n\n\n    /**\n     * @summary フォーカスが外れた時のイベント\n     *\n     * @param {Event} event  イベントデータ\n     * @memberof StandardUIViewer\n     */\n    _onBlur( event )\n    {\n        event.preventDefault()\n\n        this._resetEventParameter();\n    }\n\n    /**\n     * @summary マウスを押した時のイベント\n     *\n     * @param {MouseEvent} event  マウスイベントデータ\n     * @memberof StandardUIViewer\n     */\n    _onMouseDown( event )\n    {\n        event.preventDefault()\n\n        var mouse_position = [event.clientX, event.clientY];\n\n        this._mouse_down_position = mouse_position;\n        this._pre_mouse_position = mouse_position;\n\n        // 左ボタン\n        if ( event.button == 0 )\n        {\n            if ( event.shiftKey )\n            {\n                this._operation_mode = StandardUIViewer.OperationMode.ROTATE;\n\n                var camera = this._viewer.camera;\n                var ray = camera.getCanvasRay( this._mouse_down_position );\n                this._rotate_center = this._viewer.getRayIntersection( ray );\n            }\n            else if ( event.ctrlKey )\n            {\n                this._operation_mode = StandardUIViewer.OperationMode.FREE_ROTATE;\n            }\n            else\n            {\n                this._operation_mode = StandardUIViewer.OperationMode.TRANSLATE;\n            }\n        }\n        // 中ボタン\n        else if ( event.button == 1 )\n        {\n            this._operation_mode = StandardUIViewer.OperationMode.ROTATE;\n\n            var camera = this._viewer.camera;\n            var ray = camera.getCanvasRay( this._mouse_down_position );\n            this._rotate_center = this._viewer.getRayIntersection( ray );\n        }\n        // 右ボタン\n        else if ( event.button == 2 )\n        {\n            this._operation_mode = StandardUIViewer.OperationMode.HEIGHT_TRANSLATE;\n        }\n    }\n\n    /**\n     * @summary マウスを動かした時のイベント\n     *\n     * @param {MouseEvent} event  マウスイベントデータ\n     * @memberof StandardUIViewer\n     */\n    _onMouseMove( event )\n    {\n        event.preventDefault()\n\n        var mouse_position = [event.clientX, event.clientY];\n\n        //　平行移動\n        if ( this._operation_mode == StandardUIViewer.OperationMode.TRANSLATE )\n        {\n            this._translate_drag[0] += mouse_position[0] - this._pre_mouse_position[0];\n            this._translate_drag[1] += mouse_position[1] - this._pre_mouse_position[1];\n        }\n        //　回転移動\n        else if ( this._operation_mode == StandardUIViewer.OperationMode.ROTATE )\n        {\n            this._rotate_drag[0] += mouse_position[0] - this._pre_mouse_position[0];\n            this._rotate_drag[1] += mouse_position[1] - this._pre_mouse_position[1];\n        }\n        else if ( this._operation_mode == StandardUIViewer.OperationMode.FREE_ROTATE )\n        {\n            this._free_rotate_drag[0] += mouse_position[0] - this._pre_mouse_position[0];\n            this._free_rotate_drag[1] += mouse_position[1] - this._pre_mouse_position[1];\n        }\n        // 高度変更\n        else if ( this._operation_mode == StandardUIViewer.OperationMode.HEIGHT_TRANSLATE )\n        {\n            // 横方向は平行移動する\n            this._translate_drag[0] += mouse_position[0] - this._pre_mouse_position[0];\n            this._height_drag[1] += mouse_position[1] - this._pre_mouse_position[1];\n        }\n\n        // マウス位置の更新\n        this._pre_mouse_position = mouse_position;\n    }\n\n    /**\n     * @summary マウスを上げた時のイベント\n     *\n     * @param {MouseEvent} event  マウスイベントデータ\n     * @memberof StandardUIViewer\n     */\n    _onMouseUp( event )\n    {\n        event.preventDefault()\n\n        this._resetEventParameter();\n    }\n\n    /**\n     * @summary マウスホイールを動かした時のイベント\n     *\n     * @param {MouseWheelEvent} event\n     * @memberof StandardUIViewer\n     */\n    _onMouseWheel( event )\n    {\n        event.preventDefault()\n\n        var mouse_position = [event.clientX, event.clientY];\n\n        this._mouse_down_position = mouse_position;\n\n        var zoom = 0;\n\n        zoom = -1 * Math.sign( event.deltaY ) * Math.ceil( Math.abs( event.deltaY ) / 100 );\n\n        this._zoom_wheel += zoom;\n    }\n\n    /**\n     * @summary キーを押した時のイベント\n     *\n     * @param {KeyboardEvent} event\n     * @memberof StandardUIViewer\n     */\n    _onKeyDown( event )\n    {\n        event.preventDefault()\n\n        switch( event.key )\n        {\n            // [c] 画角の拡大\n            case \"c\":\n            case \"C\":\n                this._operation_mode = StandardUIViewer.OperationMode.CHANGE_FOVY;\n                this._fovy_key = 1;\n                break;\n\n            // [z] 画角の縮小\n            case \"z\":\n            case \"Z\":\n                this._operation_mode = StandardUIViewer.OperationMode.CHANGE_FOVY;\n                this._fovy_key = -1;\n                break;\n\n            // [x] 画角の初期化\n            case \"x\":\n            case \"X\":\n                this._camera_parameter.fov = this._default_fov\n                break;\n\n            // ↑ 前進\n            case \"ArrowUp\":\n                // 画面中央を移動基準にする\n                var canvas = this._viewer.canvas_element;\n                var mouse_position = [canvas.width / 2, canvas.height / 2];\n                this._mouse_down_position = mouse_position;\n\n                this._translate_drag[1] = 100;\n                this._key_mode = true;\n                break;\n\n            // ↓ 後退\n            case \"ArrowDown\":\n                // 画面中央を移動基準にする\n                var canvas = this._viewer.canvas_element;\n                var mouse_position = [canvas.width / 2, canvas.height / 2];\n                this._mouse_down_position = mouse_position;\n\n                this._translate_drag[1] = -100;\n                this._key_mode = true;\n                break;\n\n            // ← 左回転\n            case \"ArrowLeft\":\n                // 画面中央を移動基準にする\n                this._free_rotate_drag[0] = 100;\n                this._key_mode = true;\n                break;\n\n            case \"ArrowRight\":\n                // 画面中央を移動基準にする\n                this._free_rotate_drag[0] = -100;\n                this._key_mode = true;\n                break;\n        }\n    }\n\n    /**\n     * @summary キーを挙げた時のイベント\n     *\n     * @param {KeyboardEvent} event\n     * @memberof StandardUIViewer\n     */\n    _onKeyUp( event )\n    {\n        event.preventDefault()\n\n        switch ( event.key )\n        {\n            // [c] 画角の拡大\n            case \"c\":\n            case \"C\":\n                this._operation_mode = StandardUIViewer.OperationMode.NONE;\n                this._fovy_key = 0;\n                break;\n\n            // [z] 画角の縮小\n            case \"z\":\n            case \"Z\":\n                this._operation_mode = StandardUIViewer.OperationMode.NONE;\n                this._fovy_key = 0;\n                break;\n\n            // ↑ 前進\n            case \"ArrowUp\":\n                this._operation_mode = StandardUIViewer.OperationMode.NONE;\n                this._translate_drag[1] = 0;\n\n                this._key_mode = false;\n                break;\n\n            // ↓ 後退\n            case \"ArrowDown\":\n                this._operation_mode = StandardUIViewer.OperationMode.NONE;\n                this._translate_drag[1] = 0;\n\n                this._key_mode = false;\n                break;\n\n            // ← 左回転\n            case \"ArrowLeft\":\n                this._operation_mode = StandardUIViewer.OperationMode.NONE;\n                this._free_rotate_drag[0] = 0;\n\n                this._key_mode = false;\n                break;\n\n            case \"ArrowRight\":\n                this._operation_mode = StandardUIViewer.OperationMode.NONE;\n                this._free_rotate_drag[0] = 0;\n\n                this._key_mode = false;\n                break;\n        }\n    }\n\n    /**\n     * @summary イベントパラメータの初期化\n     *\n     * @memberof StandardUIViewer\n     */\n    _resetEventParameter()\n    {\n        this._translate_drag[0] = 0;\n        this._translate_drag[1] = 0;\n\n        this._rotate_drag[0] = 0;\n        this._rotate_drag[1] = 0;\n\n        this._free_rotate_drag[0] = 0;\n        this._free_rotate_drag[1] = 0;\n\n        this._height_drag[0] = 0;\n        this._height_drag[1] = 0;\n\n        this._operation_mode = StandardUIViewer.OperationMode.NONE;\n    }\n\n    /**\n     * @カメラの平行移動\n     *\n     * @memberof StandardUIViewer\n     */\n    _translation( delta_time )\n    {\n        if ( this._translate_drag[0] != 0 || this._translate_drag[1] != 0 ) \n        {\n            if ( this._key_mode )\n            {\n                this._translate_drag[0] *= delta_time;\n                this._translate_drag[1] *= delta_time;\n            }\n\n            var camera = this._viewer.camera;\n\n            var ray = camera.getCanvasRay( this._mouse_down_position );\n            var start_position = this._viewer.getRayIntersection( ray );\n\n            var end_mouse_position = [this._mouse_down_position[0] + this._translate_drag[0], this._mouse_down_position[1] + this._translate_drag[1]];\n            ray = camera.getCanvasRay( end_mouse_position );\n            var end_position = this._viewer.getRayIntersection( ray );\n\n            if ( start_position == null || end_position == null )\n            {\n                return;\n            }\n\n            var start_spherical_position = new mapray.GeoPoint();\n            start_spherical_position.setFromGocs( start_position );\n\n            var end_spherical_position = new mapray.GeoPoint();\n            end_spherical_position.setFromGocs( end_position );\n\n            // 球とレイの交点計算\n            var variable_A = Math.pow( this._getVectorLength( ray.direction ), 2 );\n            var variable_B = 2 * GeoMath.dot3( ray.position, ray.direction );\n            var variable_C = Math.pow( this._getVectorLength( ray.position ), 2 ) - Math.pow( start_spherical_position.altitude + GeoMath.EARTH_RADIUS, 2 );\n            var variable_D = variable_B * variable_B - 4 * variable_A * variable_C;\n\n            // カメラより選択した場所の高度が高い、交点が取れない場合は補正しない\n            if ( start_spherical_position.altitude < this._camera_parameter.height &&\n                 end_spherical_position.altitude < this._camera_parameter.height &&\n                 variable_D > 0 )\n            {\n                var variable_t1 = ( -variable_B + Math.sqrt( variable_D ) ) / 2 * variable_A;\n                var variable_t2 = ( -variable_B - Math.sqrt( variable_D ) ) / 2 * variable_A;\n\n                var variable_t = Math.min( variable_t1, variable_t2 )\n\n                end_position[0] = ray.position[0] + variable_t * ray.direction[0];\n                end_position[1] = ray.position[1] + variable_t * ray.direction[1];\n                end_position[2] = ray.position[2] + variable_t * ray.direction[2];\n\n                end_spherical_position.setFromGocs( end_position );\n            }\n\n            var delta_latitude = end_spherical_position.latitude - start_spherical_position.latitude;\n            var delta_longitude = end_spherical_position.longitude - start_spherical_position.longitude;\n\n            this._camera_parameter.latitude -= delta_latitude;\n            this._camera_parameter.longitude -= delta_longitude;\n\n            this._translate_drag[0] = 0;\n            this._translate_drag[1] = 0;\n\n            // マウスダウンの位置を更新する\n            this._mouse_down_position = this._pre_mouse_position\n        }\n    }\n\n    /**\n     * @summary カメラの回転（回転中心指定）\n     *\n     * @memberof StandardUIViewer\n     */\n    _rotation()\n    {\n        if ( this._rotate_drag[0] != 0 || this._rotate_drag[1] != 0 ) \n        {\n            if (this._rotate_center == null)\n            {\n                this._rotate_drag[0] = 0;\n                this._rotate_drag[1] = 0;\n\n                return;\n            }\n\n            var camera = this._viewer.camera;\n\n            var camera_direction = GeoMath.createVector3();\n            camera_direction[0] = camera.view_to_gocs[12] - this._rotate_center[0];\n            camera_direction[1] = camera.view_to_gocs[13] - this._rotate_center[1];\n            camera_direction[2] = camera.view_to_gocs[14] - this._rotate_center[2];\n\n            var center_geoPoint = new mapray.GeoPoint();\n            center_geoPoint.setFromGocs( this._rotate_center );\n            var center_matrix = center_geoPoint.getMlocsToGocsMatrix( GeoMath.createMatrix() );\n\n            var rotate_axis = GeoMath.createVector3();\n            rotate_axis[0] = center_matrix[8];\n            rotate_axis[1] = center_matrix[9];\n            rotate_axis[2] = center_matrix[10];\n\n            rotate_axis = GeoMath.normalize3( rotate_axis, GeoMath.createVector3() );\n\n            // カメラ自身を回転\n            var yaw_angle = -this._rotate_drag[0] / 10;\n            var pitch_angle = -this._rotate_drag[1] / 10;\n\n            var rotated_direction = this._rotateVector( camera_direction, rotate_axis, yaw_angle );\n\n            var after_pitch = GeoMath.clamp( this._camera_parameter.pitch + pitch_angle, 0, 90 );\n\n            if ( after_pitch != this._camera_parameter.pitch )\n            {\n                rotate_axis[0] = camera.view_to_gocs[0];\n                rotate_axis[1] = camera.view_to_gocs[1];\n                rotate_axis[2] = camera.view_to_gocs[2];\n\n                rotated_direction = this._rotateVector( rotated_direction, rotate_axis, pitch_angle );\n            }\n\n            var new_position = GeoMath.createVector3();\n            new_position[0] = this._rotate_center[0] + rotated_direction[0];\n            new_position[1] = this._rotate_center[1] + rotated_direction[1];\n            new_position[2] = this._rotate_center[2] + rotated_direction[2];\n\n            var new_spherical_position = new mapray.GeoPoint();\n            new_spherical_position.setFromGocs( new_position );\n\n            this._camera_parameter.latitude = new_spherical_position.latitude;\n            this._camera_parameter.longitude = new_spherical_position.longitude;\n            this._camera_parameter.height = new_spherical_position.altitude;\n            this._camera_parameter.yaw += yaw_angle;\n            this._camera_parameter.pitch = after_pitch;\n\n            this._rotate_drag[0] = 0;\n            this._rotate_drag[1] = 0;\n        }\n    }\n\n    /**\n     * @summary カメラの回転（自由回転）\n     *\n     * @memberof StandardUIViewer\n     */\n    _freeRotation( delta_time )\n    {\n        if ( this._free_rotate_drag[0] != 0 || this._free_rotate_drag[1] != 0 ) \n        {\n            if ( this._key_mode )\n            {\n                this._free_rotate_drag[0] *= delta_time;\n                this._free_rotate_drag[1] *= delta_time;\n            }\n\n            // カメラ自身を回転\n            var yaw_angle = this._free_rotate_drag[0] / 10;\n            var pitch_angle = this._free_rotate_drag[1] / 10;\n\n            var after_pitch = GeoMath.clamp( this._camera_parameter.pitch + pitch_angle, 0, 90 );\n\n            this._camera_parameter.yaw += yaw_angle;\n            this._camera_parameter.pitch = after_pitch;\n\n            this._free_rotate_drag[0] = 0;\n            this._free_rotate_drag[1] = 0;\n        }\n    }\n\n    /**\n     * @summary 高度変更\n     *\n     * @memberof StandardUIViewer\n     */\n    _translationOfHeight()\n    {\n        if ( this._height_drag[0] != 0 || this._height_drag[1] != 0 ) \n        {\n            var height_drag = this._height_drag[1];\n\n            var factor = GeoMath.gudermannian( ( this._camera_parameter.height - 50000 ) / 10000 ) + Math.PI / 2;\n            var delta_height = height_drag * 100 * factor;\n            \n            this._camera_parameter.height += delta_height;\n\n            this._height_drag[0] = 0;\n            this._height_drag[1] = 0;\n        }\n    }\n\n    /**\n     * @summary 視線方向への移動\n     *\n     * @memberof StandardUIViewer\n     */\n    _translationOfEyeDirection()\n    {\n        if ( this._zoom_wheel != 0 )\n        {\n            var camera = this._viewer.camera;\n\n            // 移動中心\n            var ray = camera.getCanvasRay( this._mouse_down_position );\n            var translation_center = this._viewer.getRayIntersection( ray );\n\n            if (translation_center == null)\n            {\n                this._zoom_wheel = 0;\n                return;\n            }\n\n            var center_spherical_position = new mapray.GeoPoint();\n            center_spherical_position.setFromGocs( translation_center );\n\n            var factor = 1.0;\n\n            // 30,000m以上は線形にする\n            if ( this._camera_parameter.height > 30000 )\n            {\n                factor = Math.abs( this._camera_parameter.height - center_spherical_position.altitude ) / 30000;\n            }\n            else\n            {\n                // マウスカーソルの下の地表面から2次曲線の傾きを求める（地表面で係数が収束するように）\n                var gradient = 3 / Math.pow( center_spherical_position.altitude / 1000 - 30, 2 )\n\n                // 30,000mを基点にする。\n                var km_height = this._camera_parameter.height / 1000 - 30;\n                var param = gradient * Math.pow( km_height, 2 ) * km_height / Math.abs( km_height );\n                factor = GeoMath.gudermannian( param ) + ( Math.PI / 2 );\n            }\n\n            var velocity = this._zoom_wheel * this._camera_parameter.speed_factor * factor;\n\n            var translation_vector = GeoMath.createVector3();\n            translation_vector[0] = translation_center[0] - camera.view_to_gocs[12];\n            translation_vector[1] = translation_center[1] - camera.view_to_gocs[13];\n            translation_vector[2] = translation_center[2] - camera.view_to_gocs[14];\n\n            var translation_direction = GeoMath.createVector3();\n            GeoMath.normalize3( translation_vector, translation_direction );\n\n            var new_camera_gocs_position = GeoMath.createVector3();\n            new_camera_gocs_position[0] = camera.view_to_gocs[12] + velocity * translation_direction[0];\n            new_camera_gocs_position[1] = camera.view_to_gocs[13] + velocity * translation_direction[1];\n            new_camera_gocs_position[2] = camera.view_to_gocs[14] + velocity * translation_direction[2];\n\n            // 移動中心を超える場合はこれ以上移動しない\n            var new_position_vector = GeoMath.createVector3();\n            new_position_vector[0] = new_camera_gocs_position[0] - camera.view_to_gocs[12];\n            new_position_vector[1] = new_camera_gocs_position[1] - camera.view_to_gocs[13];\n            new_position_vector[2] = new_camera_gocs_position[2] - camera.view_to_gocs[14];\n\n            if ( this._zoom_wheel < 0 ||\n                this._getVectorLength( translation_vector ) > this._getVectorLength( new_position_vector ) )\n            {\n                var new_camera_spherical_position = new mapray.GeoPoint();\n                new_camera_spherical_position.setFromGocs( new_camera_gocs_position );\n\n                this._camera_parameter.latitude = new_camera_spherical_position.latitude;\n                this._camera_parameter.longitude = new_camera_spherical_position.longitude;\n                this._camera_parameter.height = new_camera_spherical_position.altitude;\n            }\n\n            this._zoom_wheel = 0;\n        }\n    }\n\n    /**\n     * @summary 画角変更\n     *\n     * @memberof StandardUIViewer\n     */\n    _changeFovy()\n    {\n        var tanθh = Math.tan( 0.5 * this._camera_parameter.fov * GeoMath.DEGREE );\n        var θ = 2 * Math.atan( tanθh * Math.pow( StandardUIViewer.FOV_FACTOR, -this._fovy_key ) );\n        var range = StandardUIViewer.FOV_RANGE;\n        this._camera_parameter.fov = GeoMath.clamp( θ / GeoMath.DEGREE, range.min, range.max );\n\n        this._fovy_key = 0;\n    }\n\n    /**\n     * @カメラ位置の設定\n     *\n     * @param {object}  position            カメラ位置\n     * @param {number}  position.latitude   緯度\n     * @param {number}  position.longitude  経度\n     * @param {number}  position.height     高さ\n     * @memberof StandardUIViewer\n     */\n    setCameraPosition( position )\n    {\n        this._camera_parameter.latitude = position.latitude;\n        this._camera_parameter.longitude = position.longitude;\n        this._camera_parameter.height = position.height;\n\n        // 最低高度補正\n        if ( this._camera_parameter.height < StandardUIViewer.MINIMUM_HEIGHT )\n        {\n            this._camera_parameter.height = StandardUIViewer.MINIMUM_HEIGHT\n        }\n    }\n\n    /**\n     * @注視点の設定\n     *\n     * @param {object}  position            カメラ位置\n     * @param {number}  position.latitude   緯度\n     * @param {number}  position.longitude  経度\n     * @param {number}  position.height     高さ\n     * @memberof StandardUIViewer\n     */\n    setLookAtPosition( position )\n    {\n        // 現在の視線方向を取得\n        var current_camera_geoPoint = new GeoPoint( this._camera_parameter.longitude, this._camera_parameter.latitude, this._camera_parameter.height );\n        var current_camera_matrix = current_camera_geoPoint.getMlocsToGocsMatrix( GeoMath.createMatrix() );\n\n        var current_y_direction = GeoMath.createVector3();\n        current_y_direction[0] = current_camera_matrix[4];\n        current_y_direction[1] = current_camera_matrix[5];\n        current_y_direction[2] = current_camera_matrix[6];\n\n        var target_camera_geoPoint = new GeoPoint( position.longitude, position.latitude, position.height );\n        var target_camera_matrix = target_camera_geoPoint.getMlocsToGocsMatrix( GeoMath.createMatrix() );\n\n        var target_camera_direction = GeoMath.createVector3();\n        target_camera_direction[0] = target_camera_matrix[12] - current_camera_matrix[12];\n        target_camera_direction[1] = target_camera_matrix[13] - current_camera_matrix[13];\n        target_camera_direction[2] = target_camera_matrix[14] - current_camera_matrix[14];\n\n        current_y_direction = GeoMath.normalize3( current_y_direction, GeoMath.createVector3() );\n        target_camera_direction = GeoMath.normalize3( target_camera_direction, GeoMath.createVector3() );\n\n        var rotate_axis = GeoMath.createVector3();\n        rotate_axis[0] = current_camera_matrix[8];\n        rotate_axis[1] = current_camera_matrix[9];\n        rotate_axis[2] = current_camera_matrix[10];\n\n        var yaw_angle = this._calculateAngle( rotate_axis, current_y_direction, target_camera_direction );\n        this._camera_parameter.yaw = yaw_angle;\n\n        var current_camera_direction = GeoMath.createVector3();\n        current_camera_direction[0] = current_camera_matrix[8];\n        current_camera_direction[1] = current_camera_matrix[9];\n        current_camera_direction[2] = current_camera_matrix[10];\n\n        rotate_axis[0] = current_camera_matrix[0];\n        rotate_axis[1] = current_camera_matrix[1];\n        rotate_axis[2] = current_camera_matrix[2];\n\n        target_camera_direction[0] = -1 * target_camera_direction[0];\n        target_camera_direction[1] = -1 * target_camera_direction[1];\n        target_camera_direction[2] = -1 * target_camera_direction[2];\n\n        this._camera_parameter.pitch = GeoMath.clamp( Math.abs( this._calculateAngle( rotate_axis, current_camera_direction, target_camera_direction ) ), 0, 90 );\n    }\n\n    /**\n     * @summary カメラパラメータの設定\n     *\n     * @param {object}  parameter               カメラパラメータ\n     * @param {number}  parameter.fov           画角\n     * @param {number}  parameter.near          近接平面距離\n     * @param {number}  parameter.far           遠方平面距離\n     * @param {number}  parameter.speed_factor  移動速度係数\n     * @memberof StandardUIViewer\n     */\n    setCameraParameter( parameter )\n    {\n        if ( parameter.fov ) { \n            this._camera_parameter.fov = parameter.fov; \n            this._default_fov = parameter.fov;\n        }\n\n        if ( parameter.near ) { this._camera_parameter.near = parameter.near; }\n        if ( parameter.far ) { this._camera_parameter.far = parameter.far; }\n        if ( parameter.speed_factor ) { this._camera_parameter.speed_factor = parameter.speed_factor; }\n    }\n\n    /**\n     * @summary レイヤの取得\n     *\n     * @param {number} index    レイヤ番号\n     * @returns {mapray.Layer}  レイヤ\n     * @memberof StandardUIViewer\n     */\n    getLayer( index )\n    {\n        return this._viewer.layers.getLayer( index );\n    }\n\n    /**\n     * @summary レイヤ数の取得\n     *\n     * @returns {number}    レイヤ数\n     * @memberof StandardUIViewer\n     */\n    getLayerNum()\n    {\n        return this._viewer.layers.num_layers();\n    }\n\n    /**\n     * @summary レイヤの追加（末尾）\n     *\n     * @param {object}               layer                  作成するレイヤのプロパティ\n     * @param {mapray.ImageProvider} layer.image_provider   画像プロバイダ\n     * @param {boolean}              layer.visibility       可視性フラグ\n     * @param {number}               layer.opacity          不透明度\n     * @memberof StandardUIViewer\n     */\n    addLayer( layer )\n    {\n        this._viewer.layers.add( layer );\n    }\n\n    /**\n     * @summary レイヤの追加（任意）\n     *\n     * @param {number}               index                  挿入場所\n     * @param {object}               layer                  作成するレイヤのプロパティ\n     * @param {mapray.ImageProvider} layer.image_provider   画像プロバイダ\n     * @param {boolean}              layer.visibility       可視性フラグ\n     * @param {number}               layer.opacity          不透明度\n     * @memberof StandardUIViewer\n     */\n    insertLayer( index, layer )\n    {\n        this._viewer.layers.insert( index, layer );\n    }\n\n    /**\n     * @summary レイヤの削除\n     *\n     * @param {number} index    レイヤ番号\n     * @memberof StandardUIViewer\n     */\n    removeLayer( index )\n    {\n        this._viewer.layers.remove( index );\n    }\n\n    /**\n     * @summary レイヤの全削除\n     *\n     * @memberof StandardUIViewer\n     */\n    clearLayer()\n    {\n        this._viewer.layers.clear();\n    }\n\n    /**\n     * @summary エンティティの取得\n     *\n     * @param {number} index     エンティティ番号\n     * @returns {mapray.Entity}  エンティティ\n     * @memberof StandardUIViewer\n     */\n    getEntity( index )\n    {\n        return this._viewer.scene.getEntity( index );\n    }\n\n    /**\n     * @summary エンティティ数の取得\n     *\n     * @returns {number}    エンティティ数\n     * @memberof StandardUIViewer\n     */\n    getEntityNum()\n    {\n        return this._viewer.scene.num_entities();\n    }\n\n    /**\n     * @summary エンティティの追加\n     *\n     * @param {mapray.Entity} entity    エンティティ\n     * @memberof StandardUIViewer\n     */\n    addEntity( entity )\n    {\n        this._viewer.scene.addEntity( entity );\n    }\n\n    /**\n     * @summary エンティティの削除\n     *\n     * @param {mapray.Entity} entity    エンティティ\n     * @memberof StandardUIViewer\n     */\n    removeEntity( entity )\n    {\n        this._viewer.scene.removeEntity( entity );\n    }\n\n    /**\n     * @summary エンティティの全削除\n     *\n     * @memberof StandardUIViewer\n     */\n    clearEntity()\n    {\n        this._viewer.scene.clearEntity();\n    }\n\n    /**\n     * @summary 3次元ベクトルの長さの算出\n     *\n     * @param {mapray.Vector3} vector   対象ベクトル\n     * @returns {number}                長さ\n     * @memberof StandardUIViewer\n     */\n    _getVectorLength( vector )\n    {\n        return Math.sqrt( Math.pow( vector[0], 2 ) + Math.pow( vector[1], 2 ) + Math.pow( vector[2], 2 ) );\n    }\n\n    /**\n     * @summary 3次元ベクトルの任意軸の回転\n     *\n     * @param {mapray.Vector3} vector   対象ベクトル\n     * @param {mapray.Vector3} axis     回転軸\n     * @param {number}         angle    回転角度（deg.）\n     * @returns {mapray.Vector3}        回転後ベクトル\n     * @memberof StandardUIViewer\n     */\n    _rotateVector( vector, axis, angle )\n    {\n        var rotate_matrix = GeoMath.rotation_matrix( axis, angle, GeoMath.createMatrix() );\n\n        var target_vector = GeoMath.createVector3();\n        target_vector[0] = vector[0] * rotate_matrix[0] + vector[1] * rotate_matrix[4] + vector[2] * rotate_matrix[8] + rotate_matrix[12];\n        target_vector[1] = vector[0] * rotate_matrix[1] + vector[1] * rotate_matrix[5] + vector[2] * rotate_matrix[9] + rotate_matrix[13];\n        target_vector[2] = vector[0] * rotate_matrix[2] + vector[1] * rotate_matrix[6] + vector[2] * rotate_matrix[10] + rotate_matrix[14];\n\n        return target_vector;\n    }\n\n    /**\n     * @summary 任意軸回りの回転角度の算出\n     *\n     * @param {mapray.Vector3} axis             回転軸\n     * @param {mapray.Vector3} basis_vector     基準ベクトル\n     * @param {mapray.Vector3} target_vector    目標ベクトル\n     * @returns {number}                        回転角度（deg.）\n     * @memberof StandardUIViewer\n     */\n    _calculateAngle( axis, basis_vector, target_vector )\n    {\n        var a_vector = GeoMath.createVector3();\n        var dot_value = GeoMath.dot3( axis, basis_vector );\n\n        for ( var i = 0; i < 3; i++ )\n        {\n            a_vector[i] = basis_vector[i] - dot_value * axis[i];\n        }\n\n        var b_vector = GeoMath.createVector3();\n        dot_value = GeoMath.dot3( axis, target_vector );\n\n        for ( var i = 0; i < 3; i++ )\n        {\n            b_vector[i] = target_vector[i] - dot_value * axis[i];\n        }\n\n        GeoMath.normalize3( a_vector, a_vector );\n        GeoMath.normalize3( b_vector, b_vector );\n\n        if ( Math.abs( this._getVectorLength( a_vector ) < 1.0e-6 ) ||\n            Math.abs( this._getVectorLength( b_vector ) < 1.0e-6 ) )\n        {\n            angle = 0;\n        }\n        else\n        {\n            var angle = Math.acos( GeoMath.clamp( GeoMath.dot3( a_vector, b_vector ) / ( this._getVectorLength( a_vector ) * this._getVectorLength( b_vector ) ), -1, 1 ) ) / GeoMath.DEGREE;\n\n            var cross_vector = GeoMath.cross3( a_vector, b_vector, GeoMath.createVector3() );\n            cross_vector = GeoMath.normalize3( cross_vector, GeoMath.createVector3() );\n\n            if ( GeoMath.dot3( axis, cross_vector ) < 0 ) \n            {\n                angle *= -1;\n            }\n        }\n\n        return angle;\n    }\n}\n\nvar OperationMode = {\n    NONE: \"NONE\",\n    TRANSLATE: \"TRANSLATE\",\n    ROTATE: \"ROTATE\",\n    FREE_ROTATE: \"FREE_ROTATE\",\n    EYE_TRANSLATE: \"EYE_TRANSLATE\",\n    HEIGHT_TRANSLATE: \"HEIGHT_TRANSLATE\",\n    CHANGE_FOVY: \"CHANGE_FOVY\",\n};\n\n{\n    StandardUIViewer.OperationMode = OperationMode;\n\n    // カメラ位置の初期値（本栖湖付近）\n    StandardUIViewer.DEFAULT_CAMERA_POSITION = { latitude: 35.475968, longitude: 138.573161, height: 2000 };\n\n    // 注視点位置の初期値（富士山付近）\n    StandardUIViewer.DEFAULT_LOOKAT_POSITION = { latitude: 35.360626, longitude: 138.727363, height: 2000 };\n\n    // カメラパラメータの初期値\n    StandardUIViewer.DEFAULT_CAMERA_PARAMETER = { fov: 60, near: 30, far: 500000, speed_factor: 5000 };\n\n    // カメラと地表面までの最低距離\n    StandardUIViewer.MINIMUM_HEIGHT = 15;\n\n    // 最小近接平面距離\n    StandardUIViewer.MINIMUM_NEAR = 1.0;\n\n    // 最小遠方平面距離\n    StandardUIViewer.MINIMUM_FAR = 500000;\n\n    // 高度からの近接平面距離を計算するための係数\n    StandardUIViewer.NEAR_FACTOR = 0.5;\n\n    // 近接平面距離からの遠方平面距離を計算するための係数\n    StandardUIViewer.FAR_FACTOR = 10000;\n\n    // 画角の適用範囲\n    StandardUIViewer.FOV_RANGE = { min: 5, max: 120 };\n\n    // 画角の倍率　θ' = 2 atan(tan(θ/2)*f)\n    StandardUIViewer.FOV_FACTOR = 1.148698354997035\n}\n\nexport default StandardUIViewer;\n","import StandardUIViewer from \"./StandardUIViewer\";\n\n/**\n * Mapray UI関連の機能が含まれる名前空間\n * @namespace maprayui\n */\nvar maprayui = {\n    StandardUIViewer: StandardUIViewer\n};\n\nexport default maprayui;\n"],"names":["check","it","Math","globalThis","window","self","global","Function","exec","error","fails","Object","defineProperty","get","nativePropertyIsEnumerable","propertyIsEnumerable","getOwnPropertyDescriptor","NASHORN_BUG","call","V","descriptor","enumerable","bitmap","value","configurable","writable","toString","slice","split","classof","undefined","TypeError","IndexedObject","requireObjectCoercible","input","PREFERRED_STRING","isObject","fn","val","valueOf","hasOwnProperty","key","document","EXISTS","createElement","DESCRIPTORS","a","nativeGetOwnPropertyDescriptor","O","P","toIndexedObject","toPrimitive","IE8_DOM_DEFINE","has","createPropertyDescriptor","propertyIsEnumerableModule","f","String","nativeDefineProperty","Attributes","anObject","object","definePropertyModule","createNonEnumerableProperty","SHARED","store","setGlobal","functionToString","inspectSource","WeakMap","test","module","push","version","mode","IS_PURE","copyright","id","postfix","random","keys","shared","uid","set","enforce","getterFor","TYPE","state","type","NATIVE_WEAK_MAP","wmget","wmhas","wmset","metadata","STATE","sharedKey","hiddenKeys","objectHas","getInternalState","InternalStateModule","enforceInternalState","TEMPLATE","options","unsafe","simple","noTargetGet","source","join","prototype","aFunction","variable","namespace","method","arguments","length","path","ceil","floor","argument","isNaN","min","toInteger","max","index","integer","createMethod","IS_INCLUDES","$this","el","fromIndex","toLength","toAbsoluteIndex","includes","indexOf","require$$0","names","i","result","enumBugKeys","concat","getOwnPropertyNames","internalObjectKeys","getOwnPropertySymbols","getBuiltIn","ownKeys","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","target","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","data","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","TARGET","GLOBAL","STATIC","stat","FORCED","targetProperty","sourceProperty","forced","copyConstructorProperties","sham","redefine","sign","x","$","GeoMath","mapray","GeoPoint","StandardUIViewer","container","access_token","createViewer","_camera_parameter","latitude","longitude","height","pitch","yaw","fov","near","far","_initCameraParameter","_operation_mode","OperationMode","NONE","_mouse_down_position","createVector2f","_pre_mouse_position","_rotate_center","createVector3","_translate_drag","_rotate_drag","_free_rotate_drag","_height_drag","_zoom_wheel","_fovy_key","_default_fov","DEFAULT_CAMERA_PARAMETER","_key_mode","_viewer","destroy","Viewer","dem_provider","_createDemProvider","image_provider","_createImageProvider","layers","render_callback","render_mode","RenderMode","SURFACE","debug_stats","attribution_controller","element","_canvas_element","setAttribute","_addEventListener","_removeEventListener","CloudDemProvider","StandardImageProvider","camera_position","DEFAULT_CAMERA_POSITION","lookat_position","DEFAULT_LOOKAT_POSITION","camera_parameter","setCameraPosition","setLookAtPosition","setCameraParameter","_updateViewerCamera","canvas","addEventListener","event","_onBlur","passive","_onMouseDown","_onMouseMove","_onMouseUp","_onMouseWheel","_onKeyDown","_onKeyUp","removeEventListener","delta_time","_translation","_rotation","_freeRotation","_translationOfHeight","_translationOfEyeDirection","_changeFovy","_correctAltitude","_updateClipPlane","camera","camera_geoPoint","camera_matrix","getMlocsToGocsMatrix","createMatrix","pitch_matrix","rotation_matrix","yaw_matrix","eye_matrix","mul_AA","view_to_gocs","elevation","getElevation","altitude","MINIMUM_HEIGHT","NEAR_FACTOR","MINIMUM_NEAR","FAR_FACTOR","MINIMUM_FAR","preventDefault","_resetEventParameter","mouse_position","clientX","clientY","button","shiftKey","ROTATE","ray","getCanvasRay","getRayIntersection","ctrlKey","FREE_ROTATE","TRANSLATE","HEIGHT_TRANSLATE","zoom","deltaY","abs","CHANGE_FOVY","canvas_element","width","start_position","end_mouse_position","end_position","start_spherical_position","setFromGocs","end_spherical_position","variable_A","pow","_getVectorLength","direction","variable_B","dot3","position","variable_C","EARTH_RADIUS","variable_D","variable_t1","sqrt","variable_t2","variable_t","delta_latitude","delta_longitude","camera_direction","center_geoPoint","center_matrix","rotate_axis","normalize3","yaw_angle","pitch_angle","rotated_direction","_rotateVector","after_pitch","clamp","new_position","new_spherical_position","height_drag","factor","gudermannian","PI","delta_height","translation_center","center_spherical_position","gradient","km_height","param","velocity","speed_factor","translation_vector","translation_direction","new_camera_gocs_position","new_position_vector","new_camera_spherical_position","tanθh","tan","DEGREE","θ","atan","FOV_FACTOR","range","FOV_RANGE","current_camera_geoPoint","current_camera_matrix","current_y_direction","target_camera_geoPoint","target_camera_matrix","target_camera_direction","_calculateAngle","current_camera_direction","parameter","getLayer","num_layers","layer","add","insert","remove","clear","scene","getEntity","num_entities","entity","addEntity","removeEntity","clearEntity","vector","axis","angle","rotate_matrix","target_vector","basis_vector","a_vector","dot_value","b_vector","acos","cross_vector","cross3","RenderCallback","EYE_TRANSLATE","maprayui"],"mappings":"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"}